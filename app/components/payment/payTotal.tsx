import { useLocation } from '@remix-run/react'

import { H2, H3, H5 } from '../util/typography'
import { usePayment } from './paymentV3'

import { formatCurrency } from '~/utils'

export function PayTotal() {
  const context = usePayment()

  const location = useLocation()
  const isFullBillRoute = location.pathname.includes('full-bill') // Check if it's the full-bill route

  return (
    <>
      <H5>Vas a pagar:</H5>
      <div className="flex flex-col">
        {/* <H2>{formatCurrency(context.currency, context.amountLeft ? context.amountLeft : 0)}</H2> */}
        <H3>{formatCurrency(context.currency, isFullBillRoute ? context.amountLeft + context.tip || 0 : context.total || 0)}</H3>

        <svg viewBox="0 0 72 6" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" className="_6c0fqz5 r7kwpu12">
          <path
            d="M72 2.994c-.132.292-.329.525-.451.824-.075.188-.218.266-.4.244-.777-.09-1.547-.243-2.327-.32-.73-.075-1.461-.1-2.192-.134a73.572 73.572 0 0 1-3.847-.295c-.315-.032-.63-.075-.947-.08-1.323-.031-2.64-.217-3.962-.28-.679-.033-1.359-.05-2.038-.1-1.588-.116-3.18-.112-4.77-.18-.92-.04-1.838-.036-2.758-.039-3.123-.01-6.246-.01-9.37 0-1.757.008-3.516.048-5.274.089-1.492.033-2.983.07-4.474.14-1.393.064-2.786.158-4.179.23-1.104.058-2.21.114-3.312.225-1.488.15-2.978.212-4.466.353-1.162.112-2.328.175-3.488.32-1.1.138-2.201.27-3.303.41-1.19.15-2.376.325-3.564.482-1.13.15-2.255.349-3.38.548-.665.118-1.325.277-1.987.423a3.053 3.053 0 0 0-.37.135c-.3 0-.603-.022-.901.008-.213.021-.267-.07-.229-.307.11-.346.185-.707.227-1.075a.811.811 0 0 1 .084-.295.632.632 0 0 1 .179-.217 3.231 3.231 0 0 1 1.08-.6c1.684-.509 3.399-.792 5.107-1.107 1.123-.21 2.25-.398 3.38-.552 1.757-.24 3.513-.486 5.276-.65A355.09 355.09 0 0 1 19.72.818c.966-.08 1.932-.159 2.899-.225 1.57-.103 3.139-.187 4.708-.291 1.3-.09 2.605-.103 3.908-.154 1.503-.06 3.007-.06 4.51-.086.109 0 .22.015.32-.061h13.029c.08.05.17.072.26.06.951.016 1.899.02 2.85.061 1.232.053 2.465.083 3.697.178 1.16.09 2.32.141 3.482.276 1.369.158 2.737.25 4.1.466 1.119.178 2.237.358 3.346.604 1.402.31 2.78.778 4.198.984.327.047.677.047.972.29l.001.073Z"
            className="fill-day-principal "
          ></path>
        </svg>
      </div>
    </>
  )
}
